<head>
  <title>Lands Lords</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body, html {
      height: 100%;
      margin: 0;
      font-family: 'PT Serif', Helvetica, sans-serif;
      overflow-x: hidden;
      overflow-y: auto;
    }
  </style>

  <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
  <%= javascript_include_tag "application", "data-turbo-track": "reload", defer: true %>
</head>
<body class="flex flex-col min-h-screen relative">
  <%= render 'shared/navbar' %>

  <main class="flex-grow">
    <%= yield %>
  </main>

  <%= render 'shared/footer' %>

  <!-- Flash Modal Popup -->
  <% if flash[:notice] %>
    <div id="flash-modal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
      <div class="bg-white rounded-2xl shadow-2xl p-6 w-full max-w-sm text-center animate-fadeIn">
        <h2 class="text-xl font-semibold text-gray-800 mb-2">âœ… Success</h2>
        <p class="text-gray-600"><%= flash[:notice] %></p>
        <button onclick="document.getElementById('flash-modal').remove()" 
                class="mt-4 px-5 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
          OK
        </button>
      </div>
    </div>
  <% end %>

  <script>
    // Optional auto-close after 5s
    setTimeout(() => {
      const modal = document.getElementById('flash-modal');
      if (modal) modal.remove();
    }, 5000);
  </script>
</body>
